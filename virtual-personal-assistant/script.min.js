document.addEventListener("DOMContentLoaded",function(){let e=document.querySelector(".video-thumbnail"),t=document.querySelectorAll(".video-item"),l=document.querySelector(".play-btn"),s=document.getElementById("videoModal"),i=document.getElementById("videoPlayer"),r=document.querySelector(".close"),o=document.querySelector("#success-snippet"),a=document.querySelector(".video-carousel"),n=document.querySelector(".carousel-button.prev"),c=document.querySelector(".carousel-button.next"),d=document.querySelectorAll(".problem"),u=document.querySelectorAll(".problem-image img"),v=document.querySelectorAll(".faq-item"),m=0;function y(){window.innerWidth<=768?(n.style.display="block",c.style.display="block"):(n.style.display="none",c.style.display="none")}if(v.forEach(e=>{let t=e.querySelector(".faq-question");t.addEventListener("click",()=>{e.classList.toggle("active")})}),y(),window.addEventListener("resize",y),n.addEventListener("click",()=>{a.scrollBy({left:-220,behavior:"smooth"})}),c.addEventListener("click",()=>{a.scrollBy({left:220,behavior:"smooth"})}),t.forEach(t=>{t.addEventListener("click",function(){let t=this.dataset.thumbnail,s=this.dataset.snippet,i=this.dataset.video,r=this.dataset.author;e.querySelector("img").src=t,o.textContent=s;let a=document.getElementById("video-author-main");a||((a=document.createElement("p")).id="video-author-main",o.parentNode.insertBefore(a,o.nextSibling)),a.textContent=r,l.dataset.video=i,e.scrollIntoView({behavior:"smooth"})})}),l.addEventListener("click",function(){let e=this.dataset.video;i.src=e,s.style.display="block",i.style.width="100%",i.style.height="100%",i.play()}),r.addEventListener("click",function(){s.style.display="none",i.pause(),i.currentTime=0}),window.addEventListener("click",function(e){e.target==s&&(s.style.display="none",i.pause(),i.currentTime=0)}),t.length>0){let p=t[0];e.querySelector("img").src=p.dataset.thumbnail,o.textContent=p.dataset.snippet;let h=document.createElement("p");h.id="video-author-main",h.textContent=p.dataset.author,o.parentNode.insertBefore(h,o.nextSibling),l.dataset.video=p.dataset.video}function f(e){d.forEach((t,l)=>{l===e?(t.classList.add("active"),u[l].classList.add("active")):(t.classList.remove("active"),u[l].classList.remove("active"))})}f(m),d.forEach((e,t)=>{e.addEventListener("click",()=>{f(t),m=t})}),setInterval(()=>{f(m=(m+1)%d.length)},15e3);let E=document.getElementById("cv-request-form"),b=E.querySelectorAll(".form-step"),g=document.querySelectorAll(".progress-indicator .step"),q=E.querySelectorAll(".next-step"),L=E.querySelectorAll(".prev-step");function S(e){let t=e.querySelectorAll("input[required], select[required]"),l=!0;return t.forEach(e=>{e.value?e.classList.remove("error"):(l=!1,e.classList.add("error"))}),l}function $(e){g.forEach(t=>{let l=t.closest(".step-item");t.dataset.step<=e?(t.classList.add("active"),l.querySelector(".step-label").style.color="#004080"):(t.classList.remove("active"),l.querySelector(".step-label").style.color="#666")})}q.forEach(e=>{e.addEventListener("click",()=>{let t=e.closest(".form-step"),l=t.nextElementSibling;S(t)&&(t.classList.remove("active"),l.classList.add("active"),$(l.dataset.step))})}),L.forEach(e=>{e.addEventListener("click",()=>{let t=e.closest(".form-step"),l=t.previousElementSibling;t.classList.remove("active"),l.classList.add("active"),$(l.dataset.step)})}),E.addEventListener("submit",function(e){if(e.preventDefault(),console.log("Form submission attempted"),S(b[b.length-1])){console.log("Form validation passed, preparing to submit");let t=new FormData(E);fetch("/",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams(t).toString()}).then(e=>{if(console.log("Response received",e),e.ok)console.log("Form submitted successfully"),window.location.href="/virtual-admin-assistant/thank-you.html";else throw Error("Form submission failed")}).catch(e=>{console.error("Error:",e),alert("There was a problem with the submission. Please try again.")})}else console.log("Form validation failed")})});