document.addEventListener("DOMContentLoaded",function(){const r=document.querySelector(".video-thumbnail"),t=document.querySelectorAll(".video-item"),c=document.querySelector(".play-btn"),o=document.getElementById("videoModal"),n=document.getElementById("videoPlayer"),e=document.querySelector(".close"),l=document.querySelector("#success-snippet"),s=document.querySelector(".video-carousel"),a=document.querySelector(".carousel-button.prev"),i=document.querySelector(".carousel-button.next"),d=document.querySelectorAll(".problem"),u=document.querySelectorAll(".problem-image img"),m=document.querySelectorAll(".faq-item");let v=0;function y(){window.innerWidth<=768?(a.style.display="block",i.style.display="block"):(a.style.display="none",i.style.display="none")}if(m.forEach(e=>{const t=e.querySelector(".faq-question");t.addEventListener("click",()=>{e.classList.toggle("active")})}),y(),window.addEventListener("resize",y),a.addEventListener("click",()=>{s.scrollBy({left:-220,behavior:"smooth"})}),i.addEventListener("click",()=>{s.scrollBy({left:220,behavior:"smooth"})}),t.forEach(e=>{e.addEventListener("click",function(){var e=this.dataset.thumbnail,t=this.dataset.snippet,o=this.dataset.video,n=this.dataset.author;r.querySelector("img").src=e,l.textContent=t;let s=document.getElementById("video-author-main");s||(s=document.createElement("p"),s.id="video-author-main",l.parentNode.insertBefore(s,l.nextSibling)),s.textContent=n,c.dataset.video=o,r.scrollIntoView({behavior:"smooth"})})}),c.addEventListener("click",function(){var e=this.dataset.video;n.src=e,o.style.display="block",n.style.width="100%",n.style.height="100%",n.play()}),e.addEventListener("click",function(){o.style.display="none",n.pause(),n.currentTime=0}),window.addEventListener("click",function(e){e.target==o&&(o.style.display="none",n.pause(),n.currentTime=0)}),0<t.length){var h=t[0];r.querySelector("img").src=h.dataset.thumbnail,l.textContent=h.dataset.snippet;let e=document.createElement("p");e.id="video-author-main",e.textContent=h.dataset.author,l.parentNode.insertBefore(e,l.nextSibling),c.dataset.video=h.dataset.video}function p(o){d.forEach((e,t)=>{t===o?(e.classList.add("active"),u[t].classList.add("active")):(e.classList.remove("active"),u[t].classList.remove("active"))})}p(v),d.forEach((e,t)=>{e.addEventListener("click",()=>{p(t),v=t})}),setInterval(()=>{v=(v+1)%d.length,p(v)},15e3);const f=document.getElementById("cv-request-form");var E=f.querySelectorAll(".form-step");const L=document.querySelectorAll(".progress-indicator .step"),S=f.querySelectorAll(".next-step"),q=f.querySelectorAll(".prev-step");function b(e){const t=e.querySelectorAll("input[required], select[required]");let o=!0;return t.forEach(e=>{e.value?e.classList.remove("error"):(o=!1,e.classList.add("error"))}),o}function g(o){L.forEach(e=>{const t=e.closest(".step-item");e.dataset.step<=o?(e.classList.add("active"),t.querySelector(".step-label").style.color="#004080"):(e.classList.remove("active"),t.querySelector(".step-label").style.color="#666")})}S.forEach(o=>{o.addEventListener("click",()=>{const e=o.closest(".form-step"),t=e.nextElementSibling;b(e)&&(e.classList.remove("active"),t.classList.add("active"),g(t.dataset.step))})}),q.forEach(o=>{o.addEventListener("click",()=>{const e=o.closest(".form-step"),t=e.previousElementSibling;e.classList.remove("active"),t.classList.add("active"),g(t.dataset.step)})}),f.addEventListener("submit",function(e){e.preventDefault(),b(E[E.length-1])&&(e=new FormData(f),fetch("/",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams(e).toString()}).then(e=>{e.ok?window.location.href="/thank-you.html":alert("There was a problem with the submission.")}).catch(e=>{console.error("Error:",e)}))})});
