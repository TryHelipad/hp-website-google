document.addEventListener("DOMContentLoaded",function(){const r=document.querySelector(".video-thumbnail"),t=document.querySelectorAll(".video-item"),l=document.querySelector(".play-btn"),o=document.getElementById("videoModal"),s=document.getElementById("videoPlayer"),e=document.querySelector(".close"),i=document.querySelector("#success-snippet"),n=document.querySelector(".video-carousel"),a=document.querySelector(".carousel-button.prev"),c=document.querySelector(".carousel-button.next"),d=document.querySelectorAll(".problem"),u=document.querySelectorAll(".problem-image img"),m=document.querySelectorAll(".faq-item");let v=0;function y(){window.innerWidth<=768?(a.style.display="block",c.style.display="block"):(a.style.display="none",c.style.display="none")}if(m.forEach(e=>{const t=e.querySelector(".faq-question");t.addEventListener("click",()=>{e.classList.toggle("active")})}),y(),window.addEventListener("resize",y),a.addEventListener("click",()=>{n.scrollBy({left:-220,behavior:"smooth"})}),c.addEventListener("click",()=>{n.scrollBy({left:220,behavior:"smooth"})}),t.forEach(e=>{e.addEventListener("click",function(){var e=this.dataset.thumbnail,t=this.dataset.snippet,o=this.dataset.video,s=this.dataset.author;r.querySelector("img").src=e,i.textContent=t;let n=document.getElementById("video-author-main");n||(n=document.createElement("p"),n.id="video-author-main",i.parentNode.insertBefore(n,i.nextSibling)),n.textContent=s,l.dataset.video=o,r.scrollIntoView({behavior:"smooth"})})}),l.addEventListener("click",function(){var e=this.dataset.video;s.src=e,o.style.display="block",s.style.width="100%",s.style.height="100%",s.play()}),e.addEventListener("click",function(){o.style.display="none",s.pause(),s.currentTime=0}),window.addEventListener("click",function(e){e.target==o&&(o.style.display="none",s.pause(),s.currentTime=0)}),0<t.length){var p=t[0];r.querySelector("img").src=p.dataset.thumbnail,i.textContent=p.dataset.snippet;let e=document.createElement("p");e.id="video-author-main",e.textContent=p.dataset.author,i.parentNode.insertBefore(e,i.nextSibling),l.dataset.video=p.dataset.video}function h(o){d.forEach((e,t)=>{t===o?(e.classList.add("active"),u[t].classList.add("active")):(e.classList.remove("active"),u[t].classList.remove("active"))})}h(v),d.forEach((e,t)=>{e.addEventListener("click",()=>{h(t),v=t})}),setInterval(()=>{v=(v+1)%d.length,h(v)},15e3);const f=document.getElementById("cv-request-form");var E=f.querySelectorAll(".form-step");const g=document.querySelectorAll(".progress-indicator .step"),b=f.querySelectorAll(".next-step"),L=f.querySelectorAll(".prev-step");function S(e){const t=e.querySelectorAll("input[required], select[required]");let o=!0;return t.forEach(e=>{e.value?e.classList.remove("error"):(o=!1,e.classList.add("error"))}),o}function q(o){g.forEach(e=>{const t=e.closest(".step-item");e.dataset.step<=o?(e.classList.add("active"),t.querySelector(".step-label").style.color="#004080"):(e.classList.remove("active"),t.querySelector(".step-label").style.color="#666")})}b.forEach(o=>{o.addEventListener("click",()=>{const e=o.closest(".form-step"),t=e.nextElementSibling;S(e)&&(e.classList.remove("active"),t.classList.add("active"),q(t.dataset.step))})}),L.forEach(o=>{o.addEventListener("click",()=>{const e=o.closest(".form-step"),t=e.previousElementSibling;e.classList.remove("active"),t.classList.add("active"),q(t.dataset.step)})}),f.addEventListener("submit",function(e){e.preventDefault(),console.log("Form submission attempted"),S(E[E.length-1])?(console.log("Form validation passed, preparing to submit"),e=new FormData(f),fetch("/",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams(e).toString()}).then(e=>{if(console.log("Response received",e),!e.ok)throw new Error("Form submission failed");console.log("Form submitted successfully"),window.location.href="lp-skags-test-3/thank-you.html"}).catch(e=>{console.error("Error:",e),alert("There was a problem with the submission. Please try again.")})):console.log("Form validation failed")})});
